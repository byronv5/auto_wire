
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>原理图自动生成工具 V2.33 (模块化版)</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="app">
  <div class="header">
    <div class="row">
      <div class="title">原理图自动生成工具</div>
      <div class="version-badge">V2.33 模块化版</div>
      <div class="quality-indicator" id="quality-indicator" style="display:none">
        <span id="quality-text">--</span>
      </div>
    </div>
    <div class="toolbar"> 
      <button class="btn ghost sm" id="btn-import-netlist">导入网表</button>
             <div class="row">
         <button class="btn primary" id="btn-export-schdoc">导出schdoc</button>
       </div>
    </div>
  </div>

  <div class="main">
    <div class="canvas-wrap">
      <div class="canvas-toolbar">
        <div class="stats">
          <span>器件：<b id="inst-count">0</b></span>
          <span>连线：<b id="wire-count">0</b></span>
          <span>标签：<b id="label-count">0</b></span>
          <span>成功率：<b id="success-rate">--</b></span>
          <span>优化：<b id="optimization-count">0</b></span>
          <span>关键电路：<b id="critical-count">0</b></span>
        </div>
        <div class="row">
          <button class="btn ghost sm" id="btn-zoom-in">放大</button>
          <button class="btn ghost sm" id="btn-zoom-out">缩小</button>
          <button class="btn ghost sm" id="btn-fit">适应</button>
        </div>
      </div>
      <div class="svgbox">
        <svg id="schematic" class="schematic" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1500 950">
          <defs>
            <pattern id="grid10" width="10" height="10" patternUnits="userSpaceOnUse">
              <path d="M10 0L0 0 0 10" class="grid"></path>
            </pattern>
          </defs>
        <rect id="bg-rect" x="0" y="0" width="100%" height="100%" fill="#ffffff"></rect>
        <g id="g-grid" style="display:none">
          <rect x="0" y="0" width="100%" height="100%" fill="url(#grid10)"></rect>
        </g>
        <g id="g-scene">
          <g id="g-wires"></g>
          <g id="g-rubber"></g>
          <g id="g-symbols"></g>
          <g id="g-junctions"></g>
          <g id="g-power-symbols"></g>
          <g id="g-nettags"></g>
        </g>
        </svg>
      </div>
    </div>

    <div class="sidebar">
      <div class="card">
        <h3>网表与库状态</h3>
        <div class="kv">
          <div class="small">已载入库符号</div><div><b id="lib-count">0</b> 个</div>
          <div class="small">网表组件</div><div><b id="cmp-count">0</b> 个</div>
          <div class="small">网表网络</div><div><b id="net-count">0</b> 条</div>
        </div>
        <div class="list mono small" id="list-comps" aria-label="components list"></div>
        <div class="list mono small" id="list-nets" aria-label="nets list"></div>

        <div class="row">
          <button class="btn success" id="btn-place-route">自动布局 + 布线</button>
          <button class="btn ghost" id="btn-reroute">重新布局布线</button>
          <button class="btn ghost" id="btn-clear">清空画布</button>
        </div>
        
        <div class="row">
           <label class="small"><input type="checkbox" id="ck-grid" /> 显示网格</label>
           <div style="flex-grow: 1;"></div>
           <label for="routing-strategy" class="small">布线策略:</label>
           <select id="routing-strategy" class="sm-select">
             <option value="auto" selected>自动</option>
             <option value="standard">标准</option>
             <option value="compact">紧凑</option>
           </select>
        </div>

        <h3>网表文本（可选）</h3>
        <textarea id="netlist-text" class="mono" placeholder="在此粘贴网表文本，或点击“导入网表”选择文件..."></textarea>
        <div class="help-text">
          支持格式：JSON (.json) 或 Protel (.net)<br>
          快捷键：Ctrl+Enter 导入 | 空格键旋转选中元件
        </div>
      </div>
      
      <div class="card" id="quality-report" style="display:none">
        <h3>布局质量报告</h3>
        <div id="quality-details" class="small"></div>
      </div>
    </div>
  </div>
</div>

<div class="toast-area" id="toasts"></div>

<script type="module" src="main.js"></script>
</body>
</html>